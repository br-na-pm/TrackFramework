

<html>
	
<head>
	<title>Usage</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="generator" content="HelpNDoc Professional Edition 6.4.0.357">
	<meta name="description" content="This is a brief overview of how to implement the Acopos Trak paper widget." /> 
	<meta name="keywords" content="">
	
	
	
	<link type="text/css" rel="stylesheet" media="all" href="css/reset.css" />
	<link type="text/css" rel="stylesheet" media="all" href="css/base.css" />
	<link type="text/css" rel="stylesheet" media="all" href="css/hnd.css" />
	<!--[if lte IE 8]>
		<link type="text/css" rel="stylesheet" media="all" href="css/ielte8.css" />
	<![endif]-->
	<style type="text/css">
		#topic_header
		{
			background-color: #EFEFEF;
		}
	</style>

	
	
</head>

<body>



	
	
	<div id="topic_content">
		
<p></p>
<h1 class="rvps4"><span class="rvts0"><span class="rvts13">Usage</span></span></h1>
<p class="rvps2"><span class="rvts22">Prepare a working Acopos Trak Project</span></p>
<p class="rvps2"><span class="rvts14">To start with the trak map, you should start from a project that has a working trak layout and has an SVG that was automatically generated using the SVGData file device in your project.</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts19">Requirements:</span></p>
<p class="rvps2"><span class="rvts14">- Working Acopos Trak Project and layout (project compiles and can succesfully power on the assembly and move shuttles)</span></p>
<p class="rvps2"><span class="rvts14">- Automatically generated SVG from the SVGData file device </span></p>
<p class="rvps2"><span class="rvts14">- 5.13+ MpMotion Version</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts22">Import the TrakMap Technology Solution</span></p>
<p class="rvps2"><span class="rvts14">Place the provided technology solution in the Automation Studio technology solutions folder (BrAutomationInstallationFolder)/(AutomationStudioVersion)/AS/TechnologySolutions. In your project, select the root node in the logical view, in the toolbox select to add a Technology Solution package and select the TrakMap application package that appears.</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts22">Running the TrakMapImporter program</span></p>
<p class="rvps2"><span class="rvts12">We have created a simple tool to help assist in the parsing of the SVG and other steps needed to use the trak map.</span></p>
<p class="rvps2"><span class="rvts12">Download and run the provided </span><a class="rvts21" href="../../../technologysolutions/ts_trackmapwidgetlibrary/TrakMapImporter.exe">.exe</a></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts12">There is a prompt for 4 inputs:</span></p>
<ol style="text-indent: 0px; padding: 0; margin: 0 0 0 48px; list-style-position: outside; list-style-type: decimal;">
<li value="1" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts12">Initial SVG </span></span></li>
<li value="2" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts12">Export Folder </span></span></li>
<li value="3" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts12">Export File Name </span></span></li>
<li value="4" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts12">TrakDiag SegDefinition.st action file path </span></span></li>
</ol>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><img alt="" style="padding : 1px;" src="lib/TrackMapBuilderScreenshot.png"></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts12">The initial SVG should be the file name for the exported SVG from Automation Runtime. The export folder is the location in which you'd like to generate the SVG for the paper widget itself. The Export file name is the name of the exported SVG you'd like to have. The final input is the file location of the SegDefine.st action under the provided TrakDiag task.</span></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts12">The program when </span><span class="rvts20">Generate</span><span class="rvts12">&nbsp;is pressed, will process the provided SVG and create a formatted SVG for the paper widget. Additionally it will populate the action with the segment names and assembly name. Upon completion of the export, you should validate that the values are correct from your project.</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts14">Upon succesful generation you will need to make sure your output svg is placed into your project's Visualization Resources folder to ensure that it is transfered to the target.</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts14">Before deploying, be sure to correctly set the Assembly and ShuttleMon values of the paperCore FUB in the intialization routine of the TrakDiag task. For example:</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts33"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts33">paperCore.Assembly</span><span class="rvts34">&nbsp;</span><span class="rvts35">:=</span><span class="rvts34">&nbsp;</span><span class="rvts32">ADR</span><span class="rvts35">(gSampleTrak);</span><br/><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts35">paperCore.ShuttleMon</span><span class="rvts34">&nbsp;</span><span class="rvts35">:=</span><span class="rvts34">&nbsp;</span><span class="rvts32">ADR</span><span class="rvts35">(gShuttleMon);</span></p>
<h5 class="rvps8"><span class="rvts0"><span class="rvts23">Deploy to your Software Configuration</span></span></h5>
<p class="rvps2"><span class="rvts14">To your project add the trak paper library and the </span><span class="rvts19">TrakDiag</span><span class="rvts14">&nbsp;task. The TrakDiag task is the task that automatically implements the TrakPaper Core function block and supporting function blocks. The TrakDiag task must be added to the cyclic 8 task class (or a large idle time task class)</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<h5 class="rvps8"><span class="rvts0"><span class="rvts23">Additional Library dependancies</span></span></h5>
<p class="rvps2"><span class="rvts14">If not already in your project, make sure to add the following libraries and deploy them to your currrent configuration:</span></p>
<ul style="text-indent: 0px; padding: 0; margin: 0 0 0 24px; list-style-position: outside; list-style-type: disc;">
<li class="rvps2"><span class="rvts14">standard</span></li>
<li class="rvps2"><span class="rvts14">AsIoDiag</span></li>
<li class="rvps2"><span class="rvts14">AsBrStr</span></li>
</ul>
<h5 class="rvps8"><span class="rvts0"><span class="rvts23">Setting up the Paper widget</span></span></h5>
<p class="rvps2"><span class="rvts14">The final step that must be done is to connect to the paper widget and custom status widget.</span></p>
<p class="rvps2"><span class="rvts14">You'll need to enable the following local variables in OPC-UA for the TrakDiag task (make sure to set the variables to be automatic enable).</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<ol style="text-indent: 0px; padding: 0; margin: 0 0 0 48px; list-style-position: outside; list-style-type: decimal;">
<li value="1" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">TrakDiag:clickedSegment </span></span></li>
<li value="2" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">TrakDiag:clickId </span></span></li>
<li value="3" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">TrakDiag:paperCore.SvgTransform </span></span></li>
<li value="4" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">TrakDiag:paperCore.SvgContent </span></span></li>
</ol>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts15">Paper Widget</span></p>
<p class="rvps2"><span class="rvts12">You'll need to add a paper widget to your HMI content page you wish to show the trak map on. </span></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts12">Once added to your content, to the paper widget, select the SvgFilePath to be the generated SVG from the previous step, map the paperCore variable SvgTransform and SvgContent variables from the TrakDiag task.</span></p>
<p class="rvps2"><span class="rvts12">The Trak paper widget uses the color List property of the paper widget for the segment status colors during operation. The default color values could be the following: </span></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts12">#C9C9C9,#FF0000,#00FF00,#FFFF80</span></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts12">The important part is that the following indices are used for the styling of the segments</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<div class="rvps2"><table border="0" cellpadding="0" cellspacing="0" style="border-width: 0px; border-spacing: 0px;">
<tr valign="top">
<td width="448" valign="middle" style="padding: 0px;"><p class="rvps3"><span class="rvts20">Style Description</span></p>
</td>
<td width="64" valign="middle" style="padding: 0px;"><p class="rvps3"><span class="rvts20">Index</span></p>
</td>
</tr>
<tr valign="top">
<td width="448" valign="middle" style="padding: 0px;"><p class="rvps2"><span class="rvts12">Segment Default Style</span></p>
</td>
<td width="64" valign="middle" style="padding: 0px;"><p class="rvps2"><span class="rvts12">0</span></p>
</td>
</tr>
<tr valign="top">
<td width="448" valign="middle" style="padding: 0px;"><p class="rvps2"><span class="rvts12">Segment is in an error state</span></p>
</td>
<td width="64" valign="middle" style="padding: 0px;"><p class="rvps2"><span class="rvts12">1</span></p>
</td>
</tr>
<tr valign="top">
<td width="448" valign="middle" style="padding: 0px;"><p class="rvps2"><span class="rvts12">Segment is okay style</span></p>
</td>
<td width="64" valign="middle" style="padding: 0px;"><p class="rvps2"><span class="rvts12">2</span></p>
</td>
</tr>
<tr valign="top">
<td width="448" valign="middle" style="padding: 0px;"><p class="rvps2"><span class="rvts12">Segment is in a warning state style</span></p>
</td>
<td width="64" valign="middle" style="padding: 0px;"><p class="rvps2"><span class="rvts12">3</span></p>
</td>
</tr>
</table>
</div>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts12">Custom styling is possible by changing the color at the defined index.</span></p>
<p class="rvps2"><span class="rvts12">In order to use the segment details, the </span><span class="rvts20">clickID</span><span class="rvts12">&nbsp;property must be set for the Paper Widget. This can be done by using the below code block in an event binding and setting the </span><span class="rvts20">contentRefId</span><span class="rvts12">&nbsp;and </span><span class="rvts20">widgetRefId</span><span class="rvts12">&nbsp;correctly</span></p>
<p class="rvps7"><span class="rvts12"></span><br/><span class="rvts29">&nbsp; &nbsp; </span><span class="rvts24">&lt;</span><span class="rvts25">EventBinding</span><span class="rvts26">&nbsp;</span><span class="rvts27">id</span><span class="rvts24">="</span><span class="rvts28">content_trakmap.paperTrakMap.Click</span><span class="rvts24">"&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; &nbsp; </span><span class="rvts24">&lt;</span><span class="rvts25">Source</span><span class="rvts26">&nbsp;</span><span class="rvts27">xsi:type</span><span class="rvts24">="</span><span class="rvts28">widgets.brease.Paper.Event</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">contentRefId</span><span class="rvts24">="</span><span class="rvts28">trakmapContent</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">widgetRefId</span><span class="rvts24">="</span><span class="rvts28">paperTrakMap</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">event</span><span class="rvts24">="</span><span class="rvts28">Click</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts24">/&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; &nbsp; </span><span class="rvts24">&lt;</span><span class="rvts25">EventHandler</span><span class="rvts24">&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="rvts24">&lt;</span><span class="rvts25">Action</span><span class="rvts24">&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="rvts24">&lt;</span><span class="rvts25">Target</span><span class="rvts26">&nbsp;</span><span class="rvts27">xsi:type</span><span class="rvts24">="</span><span class="rvts28">opcUa.NodeAction</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">refId</span><span class="rvts24">="</span><span class="rvts28">::TrakDiag:clickId</span><span class="rvts24">"&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="rvts24">&lt;</span><span class="rvts25">Method</span><span class="rvts26">&nbsp;</span><span class="rvts27">xsi:type</span><span class="rvts24">="</span><span class="rvts28">opcUa.NodeAction.SetValueString</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">value</span><span class="rvts24">="</span><span class="rvts28">= elementId</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts24">/&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="rvts24">&lt;/</span><span class="rvts25">Target</span><span class="rvts24">&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="rvts24">&lt;/</span><span class="rvts25">Action</span><span class="rvts24">&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; &nbsp; </span><span class="rvts24">&lt;/</span><span class="rvts25">EventHandler</span><span class="rvts24">&gt;</span><br/><span class="rvts29">&nbsp; &nbsp; </span><span class="rvts24">&lt;/</span><span class="rvts25">EventBinding</span><span class="rvts24">&gt;</span></p>
<p class="rvps2"><span class="rvts15"><br/></span></p>
<p class="rvps2"><span class="rvts15">Custom Status Widget</span></p>
<p class="rvps2"><span class="rvts12">To use the custom widget, after importing that technology solution you will need to "Build Widget Library" in Automation Studio, Project-&gt;"Build Widget Library". </span></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts12">Add the SegmentStatus widget into your content wherever you desire. Connect the TrakDiag:clickedSegment</span><span class="rvts12">&nbsp;variable to the widget. </span></p>
<p class="rvps2"><span class="rvts24"><br/></span></p>
<p class="rvps2"><span class="rvts12">Additionally, you will need to connect the status snippets to the custom widget. Using the below code block in your content binding and set the </span><span class="rvts20">contentRefId </span><span class="rvts12">and </span><span class="rvts20">widgetRefId </span><span class="rvts12">correctly</span></p>
<p class="rvps2"><span class="rvts24"></span><br/><span class="rvts24">&lt;</span><span class="rvts25">Binding</span><span class="rvts26">&nbsp;</span><span class="rvts27">mode</span><span class="rvts24">="</span><span class="rvts28">oneWay</span><span class="rvts24">"&gt;</span><br/><span class="rvts24"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts24">&lt;</span><span class="rvts25">Source</span><span class="rvts26">&nbsp;</span><span class="rvts27">xsi:type</span><span class="rvts24">="</span><span class="rvts28">opcUa</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">refId</span><span class="rvts24">="::</span><span class="rvts28">TrakDiag:clickedSegment.Status.ErrorCode</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">attribute</span><span class="rvts24">="</span><span class="rvts28">value</span><span class="rvts24">"/&gt;</span><br/><span class="rvts24"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts24">&lt;</span><span class="rvts25">Target</span><span class="rvts26">&nbsp;</span><span class="rvts27">xsi:type</span><span class="rvts24">="</span><span class="rvts28">snippet</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">refId</span><span class="rvts24">="</span><span class="rvts28">SnippetSegError</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">attribute</span><span class="rvts24">="</span><span class="rvts28">value</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts24">/&gt;</span><br/><span class="rvts24">&lt;/</span><span class="rvts25">Binding</span><span class="rvts24">&gt;</span><br/><span class="rvts24">&lt;</span><span class="rvts25">Binding</span><span class="rvts26">&nbsp;</span><span class="rvts27">mode</span><span class="rvts24">="</span><span class="rvts28">oneWay</span><span class="rvts24">"&gt;</span><br/><span class="rvts24"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts24">&lt;</span><span class="rvts25">Source</span><span class="rvts26">&nbsp;</span><span class="rvts27">xsi:type</span><span class="rvts24">="</span><span class="rvts28">snippet</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">refId</span><span class="rvts24">="</span><span class="rvts28">SnippetSegError</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">attribute</span><span class="rvts24">="</span><span class="rvts28">value</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts24">/&gt;</span><br/><span class="rvts24"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts24">&lt;</span><span class="rvts25">Target</span><span class="rvts26">&nbsp;</span><span class="rvts27">xsi:type</span><span class="rvts24">="</span><span class="rvts28">brease</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">contentRefId</span><span class="rvts24">="</span><span class="rvts28">segmentDetailsContent</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">widgetRefId</span><span class="rvts24">="</span><span class="rvts28">SegmentStatus1</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts27">attribute</span><span class="rvts24">="</span><span class="rvts28">segErrorText</span><span class="rvts24">"</span><span class="rvts26">&nbsp;</span><span class="rvts24">/&gt;</span><br/><span class="rvts24">&lt;/</span><span class="rvts25">Binding</span><span class="rvts24">&gt;</span></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<p class="rvps2"><span class="rvts14">Finally - add the snippetset to your .vis file as shown below (the provided snippet files are in the custom library)</span></p>
<p class="rvps2"><span class="rvts14"></span><br/><span class="rvts24">&lt;</span><span class="rvts25">SnippetsSets</span><span class="rvts24">&gt;</span><br/><span class="rvts25"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts25">&lt;SnippetsSet</span><span class="rvts26">&nbsp;</span><span class="rvts27">refId</span><span class="rvts24">="</span><span class="rvts28">TrakMapSnippets</span><span class="rvts24">"/&gt;</span><br/><span class="rvts24">&lt;/</span><span class="rvts25">SnippetsSets</span><span class="rvts24">&gt;</span></p>
<p class="rvps2"><span class="rvts24"><br/></span></p>
<p class="rvps2"><span class="rvts15">Theme Definitions</span></p>
<p class="rvps2"><span class="rvts12">The custom widget utilizes some custom themes for the toggle buttons present. You can use your own themes should you like, or you can add the provided style file to your existing theme for styling.</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts15">Text Files</span></p>
<p class="rvps2"><span class="rvts12">In the provided files there are the text files. These can be included to populate the error texts and segment statuses in the status widget. Add the provided text files located in the Widget Library Resources package to the text definition for the project.</span></p>
<p class="rvps2"><img alt="" style="padding : 1px;" src="lib/TextFileDefinitions.png"></p>
<p class="rvps2"><span class="rvts24"><br/></span></p>
<p class="rvps2"><span class="rvts22"><br/></span></p>
<p class="rvps2"><span class="rvts22">Optional Features</span></p>
<p class="rvps2"><span class="rvts15"><br/></span></p>
<p class="rvps2"><span class="rvts15">Enabling Shuttles</span></p>
<p class="rvps2"><span class="rvts12">To enable shuttles, a few actions will need to be taken to ensure proper functionality:</span></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<ol style="text-indent: 0px; padding: 0; margin: 0 0 0 48px; list-style-position: outside; list-style-type: decimal;">
<li value="1" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">Update the TrakDiag:paperCore.SvgTransform binding to use a fast sampling rate. This is done in the source of the binding:</span></span></li>
</ol>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<p class="rvps2"><span class="rvts33"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts33"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts31">&lt;Binding</span><span class="rvts34">&nbsp;</span><span class="rvts30">mode</span><span class="rvts31">=</span><span class="rvts32">"twoWay"</span><span class="rvts31">&gt;</span><br/><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts31">&lt;Source</span><span class="rvts34">&nbsp;</span><span class="rvts30">xsi:type</span><span class="rvts31">=</span><span class="rvts32">"opcUa"</span><span class="rvts34">&nbsp;</span><span class="rvts30">refId</span><span class="rvts31">=</span><span class="rvts32">"::TrakDiag:paperCore.SvgTransform"</span><span class="rvts34">&nbsp;</span><span class="rvts30">attribute</span><span class="rvts31">=</span><span class="rvts32">"value"</span><span class="rvts34">&nbsp;</span><span class="rvts30">samplingRate</span><span class="rvts31">=</span><span class="rvts32">"fast"</span><span class="rvts31">/&gt;</span><br/><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts31">&lt;Target</span><span class="rvts34">&nbsp;</span><span class="rvts30">xsi:type</span><span class="rvts31">=</span><span class="rvts32">"brease"</span><span class="rvts34">&nbsp;</span><span class="rvts30">contentRefId</span><span class="rvts31">=</span><span class="rvts32">"trakmapContent"</span><span class="rvts34">&nbsp;</span><span class="rvts30">widgetRefId</span><span class="rvts31">=</span><span class="rvts32">"paperTrakMap"</span><span class="rvts34">&nbsp;</span><span class="rvts30">attribute</span><span class="rvts31">=</span><span class="rvts32">"transform"</span><span class="rvts34">&nbsp;</span><span class="rvts31">/&gt;</span><br/><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts35"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts31">&lt;/Binding&gt;</span></p>
<p class="rvps2"><span class="rvts31"> &nbsp; &nbsp; &nbsp; &nbsp;</span></p>
<p class="rvps2"><span class="rvts31"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="rvts14">It is recommended to use the default fast sampling rate of 100ms found in the Config.mappviewcfg file. </span></p>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<ol style="text-indent: 0px; padding: 0; margin: 0 0 0 48px; list-style-position: outside; list-style-type: decimal;">
<li value="2" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">Enable Shuttles through the paperCore FUB by setting </span></span><span class="rvts0"><span class="rvts33">paperOptions.Shuttle.Enabled </span></span><span class="rvts0"><span class="rvts14">to TRUE</span></span></li>
<li value="3" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">Set your maximum shuttle count in the library to match the assembly configuration</span></span></li>
</ol>
<h1 class="rvps5"><img alt="" style="padding : 1px;" src="lib/NewItem1.png"></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<p class="rvps2"><span class="rvts14">After completing these steps, shuttles should show on the paper widget in a similar way to SceneViewer</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><img alt="" style="padding : 1px;" src="lib/TrakMapWithNonColoredShuttles.png"></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><span class="rvts15">Enabling Shuttle Color</span></p>
<p class="rvps2"><span class="rvts14">To enable shuttle color, </span><span class="rvts12">a few actions will need to be taken to ensure proper functionality:</span></p>
<p class="rvps2"><span class="rvts12"><br/></span></p>
<ol style="text-indent: 0px; padding: 0; margin: 0 0 0 48px; list-style-position: outside; list-style-type: decimal;">
<li value="1" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">The included TrkPaperColorEnum in the TrkPaper library must be used in the Shuttle User Data.</span></span></li>
</ol>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<h1 class="rvps5"><img alt="" style="padding : 1px;" src="lib/TrakPaperColorEnumeration.png"></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<ol style="text-indent: 0px; padding: 0; margin: 0 0 0 48px; list-style-position: outside; list-style-type: decimal;">
<li value="2" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">The colorList of the paper widget must be appended to for the correct colors to show. The paper core function block uses static index values to color. The first 4 values of the colorList will still be used for the segments. The default values for the shuttle color could be the following: </span></span></li>
</ol>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14">#808080,#0000CD,#FF0000,#228B22,#FFFF00,#FFA500,#FFFFFF,#000000,#ff9794,#800080 </span></span></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<ol style="text-indent: 0px; padding: 0; margin: 0 0 0 48px; list-style-position: outside; list-style-type: decimal;">
<li value="3" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">Enable Shuttle Color through the paperCore FUB by setting </span></span><span class="rvts0"><span class="rvts33">paperOptions.Color.Enabled </span></span><span class="rvts0"><span class="rvts14">to TRUE</span></span></li>
<li value="4" style="margin-left: 0px" class="rvps5"><span class="rvts0"><span class="rvts14">Set the color offset for the paperCore FUB to grab the correct color value from the Shuttle User Data. Here is an example Shuttle Data struct:</span></span></li>
</ol>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<h1 class="rvps5"><img alt="" style="padding : 1px;" src="lib/ShuttleUserDataType.png"></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<p class="rvps9"><span class="rvts14">As this example structure has the Color offset by the ID variable, we need to inform the paper core of this offset. And here is the offset needed to get the correct color value:</span></p>
<p class="rvps9"><span class="rvts33"><br/></span></p>
<p class="rvps9"><span class="rvts33">paperOptions.Color.Offset</span><span class="rvts34">&nbsp;</span><span class="rvts35">:=</span><span class="rvts34">&nbsp;</span><span class="rvts32">SIZEOF</span><span class="rvts35">(</span><span class="rvts31">UDINT</span><span class="rvts35">);</span></p>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14">As a note, the typical behavior for ordering variables within a structure applies here. Even though the sample Shuttle User Data has a UINT before the Color variable, a UDINT offset (4 Bytes) is needed since the variables are word-aligned. </span></span><span class="rvts0"><span class="rvts19">An improper offset will cause the colors to not work!!!</span></span></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<h1 class="rvps5"><span class="rvts0"><span class="rvts14"><br/></span></span></h1>
<p class="rvps2"><span class="rvts14">After completing the above steps, shuttles should now have color enabled</span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p class="rvps2"><img alt="" style="padding : 1px;" src="lib/TrakMapShuttlesWithColor.png"></p>
<h5 class="rvps8"><span class="rvts0"><span class="rvts37">Shuttle Preformance</span></span></h5>
<p class="rvps2"><span class="rvts36">It is important to note, the TrakPaper widget can not and will not be able to replace the speed and precision of shuttle movements that exist inside Scene Viewer. That being said, there are some things you can do to try and increase the preformance out of the system:</span></p>
<p class="rvps2"><span class="rvts36">1. Tweak the transition time inside the paper core</span></p>
<p class="rvps2"><img alt="" style="padding : 1px;" src="lib/NewItem3.png"></p>
<p class="rvps2"><span class="rvts36">Increasing this value above the default of 100 to 200 will help for large shuttle count systems. The trade off here is that the shuttle may not follow it's exact path at higher speeds and changing directins (diverts, curves etc)</span></p>
<p class="rvps2"><span class="rvts36">2. Lower the maximum shuttle count. The library loops through the # of shuttles defined inside the constant of the library. Lowering this value if possible will decrease the load and therefore increase the animation quality of the system.</span></p>
<p class="rvps2"><span class="rvts36"><br/></span></p>
<p class="rvps2"><span class="rvts14"><br/></span></p>
<p></p>

	</div>
	
	
		<div id="topic_footer">

			<div id="topic_footer_content">
				Copyright &copy; &lt;Dates&gt; by &lt;Authors&gt;. All Rights Reserved.
			</div>
		</div>
	
	

	
</body>
	
</html>

